-- Table: public.configurations

-- DROP TABLE IF EXISTS public.configurations;

CREATE TABLE IF NOT EXISTS public.configurations
(
    id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 9223372036854775807 CACHE 1 ),
    screen_id bigint NOT NULL,
    english_field_name character varying(255) COLLATE pg_catalog."default",
    arabic_field_name character varying(255) COLLATE pg_catalog."default",
    field_length character varying(255) COLLATE pg_catalog."default" NOT NULL,
    field_type character varying(255) COLLATE pg_catalog."default" NOT NULL,
    field_option character varying(255) COLLATE pg_catalog."default",
    field_validations character varying(255) COLLATE pg_catalog."default",
    sequence integer NOT NULL,
    callback_request boolean NOT NULL,
    is_active boolean,
    created_at timestamp(6) with time zone,
    updated_at timestamp(6) with time zone,
    field_key character varying(255) COLLATE pg_catalog."default",
    err_message character varying(255) COLLATE pg_catalog."default",
    requires_profanity_check boolean DEFAULT false,
    CONSTRAINT configurations_pkey PRIMARY KEY (id)
)

TABLESPACE pg_default;

ALTER TABLE IF EXISTS public.configurations
    OWNER to postgres;

COMMENT ON COLUMN public.configurations.err_message
    IS 'Custom error message for validation failures';

COMMENT ON COLUMN public.configurations.requires_profanity_check
    IS 'Flag to indicate if field requires profanity checking';
-- Index: idx_configurations_profanity_check

-- DROP INDEX IF EXISTS public.idx_configurations_profanity_check;

CREATE INDEX IF NOT EXISTS idx_configurations_profanity_check
    ON public.configurations USING btree
    (requires_profanity_check ASC NULLS LAST)
    TABLESPACE pg_default
    WHERE requires_profanity_check = true;

INSERT INTO configurations (
    screen_id, english_field_name, arabic_field_name, field_length,
    field_type, field_option, field_validations, sequence,
    callback_request, is_active, created_at, updated_at,
    field_key, err_message, requires_profanity_check
) VALUES (
    1, 'Full Name', 'الاسم الكامل', '100',
    'alphabets', 'Mandatory', '^(?=.*\s)(?!.*[^\p{L}\s]).+$', 1,
    1, 1, SYSTIMESTAMP, NULL,
    'nameOfPerson', 'Name must be two words with letters only, separated by a space', 1
);

INSERT INTO configurations (
    screen_id, english_field_name, arabic_field_name, field_length,
    field_type, field_option, field_validations, sequence,
    callback_request, is_active, created_at, updated_at,
    field_key, err_message, requires_profanity_check
) VALUES (
    1, 'Email ID', 'البريد الإلكتروني', '254',
    'alphaNumeric', 'Optional', '^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$', 2,
    1, 1, SYSTIMESTAMP, NULL,
     'email', 'Email Id is invalid', 1
);

INSERT INTO configurations (
     screen_id, english_field_name, arabic_field_name, field_length,
    field_type, field_option, field_validations, sequence,
    callback_request, is_active, created_at, updated_at,
     field_key, err_message, requires_profanity_check
) VALUES (
     1, 'Mobile Number', 'رقم الجوال', '8',
    'numeric', 'Mandatory', '^[3567][0-9]+$', 3,
    1, 1, SYSTIMESTAMP, NULL,
     'contactNumber', 'Mobile number must be 8-digit Qatar number starting with 3, 5, 6, or 7', 0
);

INSERT INTO configurations (
     screen_id, english_field_name, arabic_field_name, field_length,
    field_type, field_option, field_validations, sequence,
    callback_request, is_active, created_at, updated_at,
     field_key, err_message, requires_profanity_check
) VALUES (
     1, 'Reason', 'السبب', '254',
    'combo', 'Mandatory', NULL, 4,
    1, 1, SYSTIMESTAMP, NULL,
     'reason', 'Reason is invalid', 0
);

INSERT INTO configurations (
     screen_id, english_field_name, arabic_field_name, field_length,
    field_type, field_option, field_validations, sequence,
    callback_request, is_active, created_at, updated_at,
     field_key, err_message, requires_profanity_check
) VALUES (
     2, 'Full Name', 'الاسم الكامل', '100',
    'alphabets', 'Mandatory', '^(?=.*\s)(?!.*[^\p{L}\s]).+$', 1,
    1, 1, SYSTIMESTAMP, NULL,
     'nameofPerson', 'Name must be two words with letters only, separated by a space', 1
);

INSERT INTO configurations (
     screen_id, english_field_name, arabic_field_name, field_length,
    field_type, field_option, field_validations, sequence,
    callback_request, is_active, created_at, updated_at,
     field_key, err_message, requires_profanity_check
) VALUES (
     2, 'Mobile Number', 'رقم الجوال', '8',
    'numeric', 'Mandatory', '^[3567][0-9]+$', 2,
    1, 1, SYSTIMESTAMP, NULL,
     'contactNo', 'Mobile number must be 8-digit Qatar number starting with 3, 5, 6, or 7', 0
);